# üöÄ Error Narrator

[![PyPI version](https://badge.fury.io/py/error-narrator.svg)](https://badge.fury.io/py/error-narrator)

**Error Narrator** ‚Äî —ç—Ç–æ Python-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ò–ò –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–æ–Ω—è—Ç–Ω—ã—Ö, —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã—Ö –æ–±—ä—è—Å–Ω–µ–Ω–∏–π –∏—Å–∫–ª—é—á–µ–Ω–∏–π –∏ —Ç—Ä–µ–π—Å–±–µ–∫–æ–≤ Python. –í–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ —Å—Ç–µ–∫–∞ –≤—ã–∑–æ–≤–æ–≤ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, –æ–±—É—á–∞—é—â–∏–π —Ä–∞–∑–±–æ—Ä —Ç–æ–≥–æ, —á—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –ø—Ä—è–º–æ –≤ –≤–∞—à–µ–π –∫–æ–Ω—Å–æ–ª–∏.

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —è–≤–ª—è–µ—Ç—Å—è –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ–π –∏ –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) –∏ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫–∏.

## üì¶ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

-   **ü§ñ –û–±—ä—è—Å–Ω–µ–Ω–∏—è –Ω–∞ –±–∞–∑–µ –ò–ò**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —è–∑—ã–∫–æ–≤—ã–µ –º–æ–¥–µ–ª–∏ –æ—Ç Gradio –∏–ª–∏ OpenAI –¥–ª—è –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –æ—à–∏–±–æ–∫.
-   **üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥**: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —á–µ—Ç–∫–æ–µ, –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤ Markdown –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ, –≤–∫–ª—é—á–∞—é—â–µ–µ:
    -   üéØ **–ü—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏**: –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –≤—ã–∑–≤–∞–ª–æ –æ—à–∏–±–∫—É.
    -   üìç **–ú–µ—Å—Ç–æ –æ—à–∏–±–∫–∏**: –£–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ—á–Ω—ã–π —Ñ–∞–π–ª –∏ —Å—Ç—Ä–æ–∫—É.
    -   üõ†Ô∏è **–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç `diff` —Å –∫–æ–¥–æ–º –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è.
    -   üéì **–û–±—É—á–∞—é—â–∏–π –º–æ–º–µ–Ω—Ç**: –û–±—ä—è—Å–Ω—è–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–¥–æ–±–Ω—ã—Ö –æ—à–∏–±–æ–∫ –≤ –±—É–¥—É—â–µ–º.
-   **üé® –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É `rich` –¥–ª—è –≤—ã–≤–æ–¥–∞ —Ü–≤–µ—Ç–Ω–æ–≥–æ, –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.
-   **‚ö° –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã (`*_async`) –¥–ª—è –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
-   **üíæ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö–µ—à–∏—Ä—É–µ—Ç –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Ç—Ä–µ–π—Å–±–µ–∫–æ–≤, —á—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏ –∏ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API.
-   **üåê –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º (`en`) –∏ —Ä—É—Å—Å–∫–æ–º (`ru`) —è–∑—ã–∫–∞—Ö.

## üíæ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install error-narrator
```

## üìù –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. üîë –ü–æ–ª—É—á–∏—Ç–µ API-–∫–ª—é—á

–î–ª—è —Ä–∞–±–æ—Ç—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è API-–∫–ª—é—á –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.

-   **Gradio (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)**: –í–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Hugging Face. –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –µ–≥–æ –≤ [–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∞—à–µ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ Hugging Face](https://huggingface.co/settings/tokens).
-   **OpenAI**: –í–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è API-–∫–ª—é—á –∏–∑ –≤–∞—à–µ–π [–ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è OpenAI](https://platform.openai.com/api-keys).

üí° **–°–æ–≤–µ—Ç:** –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–∞—à API-–∫–ª—é—á –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è:
-   `HUGGINGFACE_API_KEY` –¥–ª—è Gradio.
-   `OPENAI_API_KEY` –¥–ª—è OpenAI.

### 2. ‚öôÔ∏è –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–í–æ—Ç –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `ErrorNarrator`. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –∏ –æ–±—ä—è—Å–Ω—è–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è –≤ –±–ª–æ–∫–µ `try...except`.

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –±—É–¥–µ—Ç –Ω–∞ **–∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ**.

```python
import traceback
from error_narrator import ErrorNarrator

# –†–∞—Å—Å–∫–∞–∑—á–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è HUGGINGFACE_API_KEY,
# –µ—Å–ª–∏ api_key –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω.
narrator = ErrorNarrator() 

try:
    # –ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –æ—à–∏–±–∫—É
    result = 1 / 0
except Exception:
    # –ü–æ–ª—É—á–∞–µ–º —Ç—Ä–µ–π—Å–±–µ–∫ –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏
    traceback_str = traceback.format_exc()
    # –ü–æ–ª—É—á–∞–µ–º –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏ –≤—ã–≤–æ–¥–∏–º –µ–≥–æ –≤ –∫–æ–Ω—Å–æ–ª—å
    narrator.explain_and_print(traceback_str)
```

### 3. üåç –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –Ω–∞ –¥—Ä—É–≥–æ–º —è–∑—ã–∫–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `language` –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏.

```python
# ...
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
narrator = ErrorNarrator(language="ru")
# ...
```

### 4. üè∑Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, OpenAI)

–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –∏ –ø–µ—Ä–µ–¥–∞—Ç—å API-–∫–ª—é—á –Ω–∞–ø—Ä—è–º—É—é.

```python
narrator = ErrorNarrator(
    provider="openai",
    api_key="–≤–∞—à-openai-api-–∫–ª—é—á"
)
# ...
```

## ü§ù –î–∞–ª—å–Ω–µ–π—à–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∞—à –≤–∫–ª–∞–¥! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å pull request'—ã –∏–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å issue.